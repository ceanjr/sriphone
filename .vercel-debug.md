# Debug Vercel Build

## Se o erro persistir, colete estas informações:

### 1. Logs da Vercel
No deploy que falhou, copie:
- Build logs completos
- Function logs (se houver)

### 2. Versões
```bash
node -v
npm -v
npm list @astrojs/vercel
npm list astro
```

### 3. Estrutura esperada após build local
```bash
npm run build
tree .vercel/output -L 2
```

Deve mostrar:
```
.vercel/output
├── config.json          ← ESTE ARQUIVO É CRÍTICO
├── functions/
├── server/
└── static/
```

### 4. Conteúdo do config.json
```bash
cat .vercel/output/config.json | head -50
```

### 5. Configurações na Vercel
Screenshot ou copie:
- Settings → General (todas as configs)
- Settings → Environment Variables

## Possíveis Causas

### Se config.json existe local mas não na Vercel:

1. **Build falha silenciosamente**
   - Verifique se há erros no build log da Vercel
   - Procure por "error" ou "warning"

2. **Adapter não executa**
   - Verifique se @astrojs/vercel está instalado
   - Veja se há conflito de versões

3. **Output directory errado**
   - Certifique-se que não há override
   - Deixe Vercel auto-detectar

4. **Cache corrompido**
   - Delete e re-importe projeto
   - Ou use "Clear cache and deploy"

### Se o build local também falha:

```bash
rm -rf node_modules package-lock.json .vercel dist
npm install
npm run build
```

Se falhar, o problema é no código, não na Vercel.

## Fallback: Use Static Output

Se SSR não funcionar na Vercel, use static temporariamente:

```js
// astro.config.mjs
export default defineConfig({
  output: 'static', // ← Muda aqui
  adapter: vercel(),
  // ...
});
```

**Desvantagem:** Perde API routes do admin (mas o site funciona)

## Alternativa: Outros Hosts

Se Vercel continuar com problemas:
- Netlify (suporta SSR bem)
- Cloudflare Pages (bom suporte Astro)
- Railway / Render (Node.js direto)

